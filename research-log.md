# Research Log: Improving Training Systems Efficiency via Astra-Sim

| # | Date | Phase | Summary |
|---|------|-------|---------|
| 1 | 2026-02-28 | Init | Workspace created. Research question: how can training system efficiency be improved across perspectives (compute, communication, memory, scheduling)? Using Astra-Sim as simulation backbone. CPU-only constraint; all experiments via simulation. |
| 2 | 2026-02-28 | Literature Survey | Completed Phase 1. Surveyed 10 directly relevant papers (TACOS, TACCL, HiCCL, GenModel, BW-Optimal-Pipeline, Blink, ASTRA-sim 2.0, Demystifying NCCL, BandPilot, SWOT). **Critical novelty gap confirmed**: no prior work treats scheduling policy (FIFO-baseline vs. FIFO-localBWAware) as a gating condition for hierarchical collective benefit/anti-benefit. HiCCL et al. assume hierarchy always helps. Survey written to `literature/lit-survey.md`. |
| 3 | 2026-02-28 | Hypothesis Generation | Generated 5 hypotheses via F4 (Tension) + F7 (Failure Analysis) framing: H1 (Scheduling-Induced Anti-Benefit), H2 (Non-Monotone Chunk Granularity), H3 (3D Topology Outperforms 2D), H4 (active-chunks Hidden Knob), H5 (Inverted Topology Optimality). Top scored: H1=4.8, H4=4.5, H2=4.2. |
| 4 | 2026-02-28 | Judgment Gate | **PASSED.** Primary hypothesis: H1 (Scheduling-Induced Anti-Benefit). Reasoning: highest novelty, no prior work, strongest actionable implication (don't use FIFO-baseline with hierarchical topology). Secondary focus: H4 (active-chunks linear scaling — either real finding or ASTRA-sim modeling gap, both publishable). Research-tree.yaml updated with full structure. |
| 5 | 2026-02-28 | Experiment Design | Leveraged existing ASTRA-sim analytical backend (binary confirmed working at `/home/azureuser/astra-sim-repo/build/astra_analytical/build/bin/AstraSim_Analytical_Congestion_Unaware`). Experiment grid: 5 BW ratios × 3 N sizes × 4 msg sizes × 3 algorithms × 2 scheduling policies = 360 configurations. Pre-registered confirmatory test: BW=6:1, N=64, msg=100MB, threshold ≥10% anti-benefit. |
| 6 | 2026-02-28 | Experiment Execution | **360-config sweep COMPLETE.** Results in `experiments/data/sweep_360.csv`. Key findings confirmed by direct analysis: **19/60 anti-benefit cells** (ring_ring_baseline SLOWER than flat oneRing). Worst case: BW=48:1, N=64, msg=1000MB → **15.2× SLOWER than flat**. localBWAware rescues **16/19** cases. Anti-benefit boundary: BW ≥ 8:1 AND msg ≥ 100MB. **active-chunks sweep** (36 configs) shows 7.4–8.0× linear scaling with no saturation at ac=8. |
| 7 | 2026-02-28 | Confirmatory Test | Pre-registered confirmatory test executed: BW=6:1, N=64, msg=100MB. **REFUTED** — ring_ring_baseline = 0.80× oneRing (hierarchy helps at 6:1). This is scientifically valuable: anti-benefit boundary confirmed between 6:1 and 8:1 BW ratio, not at 6:1 as would be required by a broader claim. |
| 8 | 2026-02-28 | Analysis | **Key numbers confirmed from 360-config dataset:** (1) Anti-benefit regime: 19/60 cells at BW≥8:1/msg≥100MB; (2) Worst case: 15.2× slowdown at 48:1/N=64/1000MB; (3) localBWAware rescue: 16/19 cases (84%); (4) active-chunks: 8.0× linear EBU scaling universally, e.g., BW=1:1/1MB: ac1=4.3→ac8=34.0 GB/s, BW=48:1/100MB: ac1=155.9→ac8=1155.7 GB/s. Analysis script: `experiments/analyze.py`. |
| 9 | 2026-02-28 | Advisor Assessment | **PHASE: Literature→Experiment→Analysis complete in first cycle.** Core finding fully supported: scheduling policy is a 15× gating factor for hierarchy in worst case. Anti-benefit boundary sharp at 6:1–8:1 BW ratio. Two publishable contributions: (A) the anti-benefit map with pre-registered confirmatory test, (B) active-chunks as hidden 8× performance knob (potential modeling gap paper). **Next action:** Begin writing phase — draft intro and results tables, generate heatmap figures. Consider running Exp2 (H4 active-chunks at finer granularity) to strengthen claim B. |

| 10 | 2026-02-28 | Reflection+SubHypotheses | **New cycle: derived H1.1, H4.1, H6 from existing data + new experiments.** Key findings: (A) H4.1 CONFIRMED — AC saturation gated by min(ac, preferred-dataset-splits). Grid experiment h41_ac_splits.csv: perfect halving per doubling of min(ac,splits), no benefit beyond splits. Reconciles the apparent conflict between active_chunks.csv (8× linear) and ac_saturation.csv (saturates at 4×). (B) H6 CONFIRMED — Anti-benefit threshold follows power law: threshold_BW ≈ 94.1 × msg_mb^(-0.571). Derived from sweep_360.csv: 10MB→48:1, 100MB→8:1, 1000MB→4:1. Extrapolates to 100GB (LLM all-reduce) threshold < 1:1 = hierarchy always hurts. (C) H1.1 CONFIRMED — message size shifts crossover predictably. Data files: data/h41_ac_splits.csv, data/h6_powerlaw.csv. Next hypotheses queued: H4.2 (splits > ac regime — does ac=1 always mean leaving performance on table?), H7 (does the power law hold for 3D hierarchies?). |
